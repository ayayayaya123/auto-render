# 页面开发说明

## question

1. 如何开发出一个复合规范的动态页面 别的页面也可以复用使用？

   符合规范的动态页面，需要配合以下代码使用

   1. 首先，在HBuilder X的项目中，使用项目 新增页面 就会生成一个模板，如下:

      ```vue
      <template>
      </template>
      <script>
      </script>
      <style>
      </style>
      ```

      然后，增加基础模板，组件可全局引入也可局部引入，局部引入模板如下:

      ```vue
      <!-- 模板说明，首先，只支持json-mock不同id间的跳转，这个id取于form api中的?id=(id)参数部分 -->
      <template>
      	<dynamic-page :API="api" v-if="api">
          </dynamic-page>
      </template>
      <script>
          import dynamicPage from '@/components/dynamic-page/index.vue'
          import { globalConfig } from '@/config.js' //这里通过公共配置获取api的endpoint
      	export default {
              components:{
                  dynamicPage
              },
              data(){
                  return {
                      api:null
                  }
              },
              onLoad(e){
                let query = e,query?JSON.parse(decodeURIComponent(e.query)):e //这里作用是为了兼容两种跳转情况
                this.api = this.getAPI(query.id)
              },
              methods:{
                  getAPI(id){
      				return `${globalConfig.formHost}?id=${id}`
                  }
              }
          }
      </script>
      ```

      这样 一个简单的与json-mock api联动的前端模板就做好了，像以上的做法也可以使用全局组件声明来使用，如果全局声明的话，那么模板如下

      main.js

      ```js
      import Vue from 'vue'
      import App from './App'
      import { globalConfig } from '@/config.js'
      import dynamicPage from '@/components/dynamic-page/index.vue'
      
      Vue.config.productionTip = false
      
      // 全局声明变量
      Vue.prototype.$config = globalConfig
      
      //全局使用组件
      Vue.component("dynamic-page",dynamicPage)
      
      App.mpType = "app"
      
      const app = new Vue({
          ...App
      })
      
      app.$mount()
      ```

      page.vue

      ```vue
      <!-- 全局声明类型模板 作用与上面模板一致 全局声明之后不用二次声明组件等 -->
      <template>
      	<dynamic-page :API="api">
          </dynamic-page>
      </template>
      <script>
      	export default {
              data(){
                  return {
                      api:null
                  }
      		},
              method:{
              	getAPI(id){
      				return `${globalConfig.formHost}?id=${id}`
                  }
              },
              onLoad(e){
                let query = e,query?JSON.parse(decodeURIComponent(e.query)):e //这里作用是为了兼容两种跳转情况
                this.api = this.getAPI(query.id)
              }
          }
      </script>
      ```

      

   

